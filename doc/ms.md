## mysql　 
sql 优化
  1、建表

　　　　1）、主键使用合适的无符号unsigned整型自增（避免数据增加时索引页分裂）

　　　　2）、长度固定的字符串字段使用CHAR类型，Varchar会额外使用1或者2个字节（长度小于255使用1字节）存储字符串长度

　　　　3）、选择合适的字符串数据类型和日期类型（优先TIMESTAMP，占用4字节）

　　2、索引

　　　　1）、使用单独的列（不对索引进行表达式或者函数运算）

　　　　2）、对于BLOB、TEXT或者很长的VARCHAR类型的列，使用前缀索引

　　　　3）、多列索引选择合适的索引列顺序（索引列的选择度和最左原则）

　　　　4）、能使用覆盖索引的使用覆盖索引、使用索引排序

　　　　5）、索引列字段应不为NULL（会导致索引失效，若是唯一索引，多列可以有NULL值，使唯一索引失效）

　　　　6）、索引保持在5条左右，多的话影响插入和更新性能

　　3、查询（避免索引失效）

　　　　1）、使用EXPLAIN查询SQL优化器执行计划，调整SQL查询

　　　　2）、使用not exists代替not in，not in不会使用索引

　　　　3）、查询条件避免使用前导模糊查询，如'%xxx'，因为无法使用索引

　　　　4）、查询条件使用or的话，要保证or两边的列都要有索引，否则索引失效

　　　　5）、字符串型字段为数字时，在where条件中要加单引号，否则索引失效（因为这样MySQL会讲表中字符串类型转换为数字之后再比较，导致索引失效）

　　　　6）、多列索引要满足最左前缀要求

　　　　7）、ISNULL判断不走索引，要慎用

　　　　8）、LIMIT分页的页码不能太大，会查询出所有的结果然后丢弃掉不需要的。使用主键做连接查询

工作中遇到的 mysql优化

1. 原料出入库报表的查询， 写好sql之后建立视图，一开始没什么问题，后面时间变长。通过查看执行计划，加字段，改代码加索引多个方面优化

2. 物流查询，查询条件很多，通过多个条件去查询数据 加中间缓存表，减少联表次数 代价就是同步更新和插入变慢

3. mysql 相关原理自己看书

4. 分区表 

分区表我的理解就是 将一个表通过分区键分成多个区间，当使用分区键查询的时候就能减少表查询的范围
分区的规则 范围分区 集合分区 hash分区 key分区 复合分区
## shardingjdbc 

项目中怎么去使用这个东西的 

使用的它的公共表功能 和读写分离功能  都是通过配置文件来配置的



分片策略

- 标准分片策略
- 复合分片策略
- 行表达式分片
- Hint分片策略
- 自定义
执行过程是什么样的

- sql 解析  解析sql树
- sql 路由 路由到不同的表
- sql改写 
- sql执行 
- 结果归并
分片策略根据业务场景去制定的 

比如我们有个业务是，当多个销售单在同一个客户下的时候会合并成一张合并单表。这个就是一个一对多的关系，
基本上后面的业务操作也是在合并单层面 所以这里分片就可以取模分片 确保同一个合并单下的销售单在一张表里面
查询

## 自我介绍

你好我叫XXX 湖南邵阳人，我应聘的职位是Java 工程师 我说一下我的工作经历吧，我第一份工作做珠宝行业销售相关的软件开发，
前期是研发erp系统，后面公司准备上市，升级业务又研发分布式平台，当时分布式平台的技术选型和架构我都参与的，当时技术选型对dubbo grpc 和 spring cloud 都参考过
然后在那段时间里面也读了不少源码。后来公司领导层出了些问题，上市不是很成功加上19年的时候行业发展不是很好就从公司离职了。
第二份工作也就是这一份工作是给家具行业的公司做内部系统的迭代，基于dubbo开发分布式项目，日常的工作就是讨论业务实现方案，开发，优化sql。
我在github上也有自己的开源项目，但是知名度不是很高吧，最高的一个毕业项目只有40个star。


## 项目相关 
说说你们项目的架构 说一说销售平台那个分布式系统吧，那个我是从开发到上线全程参与的，
我们架构就是 使用阿里巴巴的部分naocos 和sentinel 分布式事务使用的 txlcn。
我们当时的思路也很简单，就是拆分出多个独立的应用，各个应用之间做到业务不交叉，用户模块，销售模块 报表报表，erp模块，crm模块 app和小程序模块。
当时感觉设计的也挺成功的，每个模块都连接一个独立的数据库。并且之间涉及到分布式事务的功能逻辑特别少，基本上就是没有。
我主要的任务是研究阿里巴巴的nacos注册中心，
和搭建鉴权中心，对openfeign二次封装 

## dubbo 

聊一聊dubbo源码

## springcloud

聊一聊 spring cloud 源码

## 并发

aqs AbstractQueuedSynchronizer
aqs 的结构  state Node 
CLH队列 state 状态标识符 
Node 属性waitStatus 标识线程状态

## se

hashmap

hashtable

ConcurrentHashMap

ConcurrentSkipListMap

ConCurrentSkipListSe

CopyOnWriteArrayList

CopyOnWriteArraySet

ConcurrentLinkedQueue

BlockingQueue, Deque, BlobkingDequeue ArrayBlickingQueue, LinkedBlockingQueue，PriorityQueue, PriorityBlockingQueue
 
io

nio 

四大组件
channel buffer  charset selector  


## netty
select poll epoll 它们都是 io 多路复用的一种机制
select io复用的机制是当有io 事件发生的时候 轮询所有流，找到可以使用的流

epoll 是Linux系统里面的基于事件通知机制的

netty 的编程模型其实和spring 的webflux 是一样的 采用的是基于事件驱动的reactor的线程模型
哪些事件：

inbound 上行事件 通道注册 解除注册 通道活跃事件 通道非活跃事件 异常事件 用户事件 读事件 读完成事件 写状态变化事件
outbound 下行事件 端口绑定事件 连接事件 断开连接事件 关闭事件 解除注册事件 刷新事件 读事件 写事件 写出数据刷新事件

netty 组件 

channel  eventloop bootstrap channelhandle buff

netty 的流程说一说
服务端 serverbootstrap 应用构建的引导类，简化netty应用构建流程
创建父子线程组
设置并绑定channel
注册事件监听处理器

netty 粘拆包处理


tcp-ip协议说一说

iso 
网络分层 链路层 网络层 传输层 应用层
TCP 协议是  传输层  ip协议是网络层

tcp 如何保证传输的可靠性

一份数据会被切割成多帧，每一帧都包含序号 在tcp的接收端排序组装，去掉重复数据

超时重传，发送方发送数据到接收方，接收方会发送一个一个确认接收的数据帧给接收方，否则会重传

流量控制 当发送方数据发送过快的时候接收方会发送数据帧让发送方降低速度

拥塞控制 通过拥塞窗口来控制数据传输的速率 

http 协议说一说
协议报文包含

请求行
请求首部字段
请求内容实体

响应状态行
响应首部字段
响应内容实体

## redis

## nginx

## linux
