盐田服务器部署信息

\\192.168.0.3

IP地址		root初始密码	
10.21.233.176		k7TpeBk_	openjdk-1.8 生产1 金蝶天燕
10.21.233.177		8@QxkE@A	openjdk-1.8 生产2 金蝶天燕
10.21.233.178		gLh9@CFR	openjdk-1.8 预发布1 金蝶天燕
10.21.233.179		ENu8d6zn	nginx,前端代码1 前端代码2 开通网路策略的机器，可以通过vpn 访问
10.21.233.180		!cVZYTc4	zookeeper  kafka openjdk-1.8  安装完成 broker 0 
10.21.233.181		WVdCm!h9	zookeeper kafka openjdk-1.8 安装完成 broker 1
10.21.233.182		9ky8W4tT	zookeeper kafka openjdk  安装完成 broker 2
10.21.233.183		bHhEb9JP    zookeeper kafka /单机  安装完成
10.21.233.184		Yc63fWGc	mysql root/root123 达梦
10.21.233.185		GSh6F6tZ	达梦 

!GSh6F6tZ

软件安装路径： /usr/local  防火墙未配置

firewalld 

scp /home/ibpms/project/repo/back/ibpms-repo-api-0.0.1.jar root@10.4.4.12:/home/ibpms/project/repo/back/ibpms-repo-api-0.0.1.jar
scp 
## 查看yum 源配置

cat /etc/yum.repos.d/kylin_aarch64.repo

## 检查 yum 源域名

wget http://update.cs2c.com.cn:8080

## 查看dns 添加dns 服务器 刷新


  nmcli connection show
  
  nmcli con mod enp4s0 ipv4.dns "114.114.114.114 202.96.128.86 202.96.134.133"
  
  nmcli con up enp4s0
  
## 安装jdk

  yum --showduplicate list java*
  
  yum install java-1.8.0-openjdk.aarch64
  
export JAVA_HOME=/usr/lib/jvm/jre-1.8.0-openjdk-1.8.0.242.b08-1.h5.ky10.aarch64
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar
export PATH=$PATH:$JAVA_HOME/bin
  
## 安装nginx

https://www.cnblogs.com/boonya/p/7907999.html

## 安装zk

https://www.cnblogs.com/zwcry/p/10244908.html
cnblogs.com/quchunhui/p/10019202.html

ZOOKEEPER_HOME=/usr/local/zookeeper-3.5.9
PATH=$PATH:$ZOOKEEPER_HOME/bin
export PATH ZOOKEEPER_HOME PATH

server.0=10.21.233.180:2888:3888
server.1=10.21.233.181:2888:3888
server.2=10.21.233.182:2888:3888

systemctl start zookeepe


zkServer.sh status

[Unit]
Description=zookeeper
After=network.target remote-fs.target nss-lookup.target
[Service]
Type=forking
ExecStart=/usr/local/zookeeper/apache-zookeeper-3.5.9-bin/bin/zkServer.sh start
ExecReload=/usr/local/zookeeper/apache-zookeeper-3.5.9-bin/bin/zkServer.sh restart
ExecStop=/usr/local/zookeeper/apache-zookeeper-3.5.9-bin/bin/zkServer.sh stop
[Install]
WantedBy=multi-user.target


## 安装 kafka
https://www.cnblogs.com/Hackerman/p/12595246.html
https://blog.csdn.net/chengyuqiang/article/details/80063588


sh /usr/local/kafka_2.13-2.8.0/bin/kafka-server-start.sh /usr/local/kafka_2.13-2.8.0/config/server.properties

vi /etc/systemd/system/kafka.service

log.dirs=/usr/local/kafka_2.13-2.8.0/kafka-logs

export KAFKA_HOME=/usr/local/kafka_2.13-2.8.0
export PATH=$PATH:$KAFKA_HOME/bin
  
[Unit]
Description=Apache Kafka Server
Documentation=http://kafka.apache.org/documentation.html
Requires=zookeeper.service
 
[Service]
Type=simple
ExecStart=/usr/local/kafka_2.13-2.8.0/bin/kafka-server-start.sh /usr/local/kafka_2.13-2.8.0/config/server.properties
ExecStop=/usr/local/kafka_2.13-2.8.0/bin/kafka-server-stop.sh
Restart=on-abnormal
 
 
[Install]
WantedBy=multi-user.target



systemctl daemon-reload
systemctl status kafka
systemctl enable kafka
systemctl is-enabled kafka

https://www.cnblogs.com/kentalk/p/kafka-cluster-deploy-guide.html

bin/kafka-topics.sh --list --bootstrap-server 10.21.233.180:9092
## 安装redis

https://www.cnblogs.com/zuidongfeng/p/8032505.html

安装过程中缺少依赖包，执行指令：
yum -y install *atomic*

https://blog.csdn.net/qq_40460909/article/details/100669852


## minio 
nohup /usr/local/minio/minio server /usr/local/minio/data > /usr/local/minio/minio.log 2>&1 &


## mysql
https://bbs.huaweicloud.com/blogs/183587

root root123


## 达梦 
https://blog.csdn.net/u013186600/article/details/72772002
https://www.cnblogs.com/wangchaonan/p/12123052.html

./dminit PATH=/dmdata PAGE_SIZE=32 CASE_SENSITIVE=1 CHARSET=1 DB_NAME=DMDB INSTANCE_NAME=dmdb PORT_NUM=5236
dminit path=/dmdata page_size=32 extent_size=32 charset=1 log_size=2048 db_name=dmdb instance_name=dmdb SYSDBA_PWD="Hn@dameng123" SYSAUDITOR_PWD="Hn@dameng123"
./dm_service_installer.sh -p DMSERVER  -t dmserver -dm_ini  /usr/local/dm/data/DMDB/dm.ini

https://www.cnblogs.com/fangzpa/p/13944210.html

```sql
create user "MPC" identified by "!GSh6F6tZ"
limit failed_login_attemps 10, password_lock_time 1, password_grace_time 10
allow_ip "10.21.233.*";

grant "PUBLIC","VTI" to "MPC";

CREATE SCHEMA "MPC_UAT" AUTHORIZATION "MPC_UAT_USER";
```

export DM_HOME=/usr/local/dm
export PATH=$PATH:$DM_HOME/bin

systemctl start DmServiceDMSERVER

select distinct object_name TABLE_SCHEMA from all_objects where object_type = 'SCH';


[root@localhost dm]# disql 
disql V8
用户名:SYSDBA
密码:

服务器[LOCALHOST:5236]:处于普通打开状态
登录使用时间 : 2.024(ms)
SQL> 

grant CREATE TABLE to "MPC";

grant INSERT TABLE to "MPC";

grant UPDATE TABLE to "MPC";

grant DELETE TABLE to "MPC";

grant GRANT TABLE to "MPC";


create table "MPC"."SHEDLOCK"
(
	"NAME" VARCHAR(50) not null ,
	"LOCK_UNTIL" TIMESTAMP(6),
	"LOCKED_AT" TIMESTAMP(6),
	"LOCKED_BY" VARCHAR(255),
	primary key("NAME")
)
storage(initial 1, next 1, minextents 1, fillfactor 0)
;

### 金蝶天燕

export PATH=$PATH:/home/AAMS-V10/bin
整合 springboot 2.1.x + aams 需要加依赖和 检查 redis 报错，其他的配置方式和tomcat类似 

systemctl start aams
systemctl stop aams

tail -f -n200 /home/AAMS-V10/logs/apusic.out

 tail -f -n200 /data/logs/egb/egb-mpc.log 